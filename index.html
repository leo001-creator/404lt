<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>404.lt – Pamirštos vietos</title>
<meta name="description" content="404.lt – pamirštos ir slaptos vietos Lietuvoje. Interaktyvus žemėlapis, galerija ir istorijos." />
<link rel="icon" href="https://via.placeholder.com/32x32.png?text=404" />
<style>
/* =========================
   RESET & GLOBALS
   ========================= */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
body {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: #050507;
  color: #e9eef1;
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

/* =========================
   SIMPLE LOADER (LOGO + DOTS)
   ========================= */
#preloader {
  position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg,#050507 0%, #040405 100%); z-index: 99999;
  transition: opacity .45s ease, visibility .45s ease;
  visibility: visible; opacity: 1;
}
.loader {
  display:flex; flex-direction:column; align-items:center; gap:10px;
  padding: 20px 26px; border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: 0 30px 80px rgba(0,0,0,0.6), 0 8px 40px rgba(255,76,76,0.06);
  border: 1px solid rgba(255,255,255,0.03);
}
.logo-box {
  width:96px; height:96px; border-radius:16px;
  background: linear-gradient(135deg,#ff4c4c,#ff9f1c);
  display:flex; align-items:center; justify-content:center; font-weight:900; color:#120707;
  box-shadow: 0 18px 50px rgba(255,76,76,0.18), inset 0 -8px 18px rgba(0,0,0,0.15);
  animation: logoPulse 1.2s ease-in-out infinite;
}
@keyframes logoPulse {
  from { transform: translateY(0) scale(1); box-shadow: 0 18px 50px rgba(255,76,76,0.18); }
  to { transform: translateY(-6px) scale(1.04); box-shadow: 0 30px 80px rgba(255,76,76,0.22); }
}
.loader-text { font-weight:800; color:#fff; letter-spacing:1px; font-size:18px; }
.load-dots { display:flex; gap:8px; margin-top:6px; }
.load-dots span {
  width:10px; height:10px; border-radius:50%; background: rgba(255,255,255,0.08);
  transform: scale(.85);
  animation: dotBounce 1.1s infinite ease-in-out;
}
.load-dots span:nth-child(2){ animation-delay: .12s; }
.load-dots span:nth-child(3){ animation-delay: .24s; }
@keyframes dotBounce {
  0% { transform: translateY(0) scale(.85); opacity:.6; }
  50% { transform: translateY(-8px) scale(1.08); opacity:1; }
  100% { transform: translateY(0) scale(.85); opacity:.6; }
}
#preloader.hidden { opacity:0; visibility:hidden; pointer-events:none; }

/* =========================
   BACKGROUND EFFECTS (aurora, grid, starfield, clouds, rain, leaves)
   ========================= */
.aurora {
  position: fixed; inset: -10% -10% -10% -10%; z-index: 0; pointer-events: none; opacity: 0.16;
  background: linear-gradient(120deg, rgba(255,76,76,0.12), rgba(255,159,28,0.06), rgba(40,120,255,0.02));
  background-size: 400% 400%;
  animation: auroraShift 18s ease-in-out infinite;
  filter: blur(30px) saturate(1.1);
}
@keyframes auroraShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

.bg-lines {
  position: fixed; inset:0; z-index: 1; pointer-events:none; opacity:0.09;
  background-image:
    linear-gradient(90deg, rgba(255,76,76,0.05) 0.5px, transparent 0.5px),
    linear-gradient(180deg, rgba(255,159,28,0.02) 0.5px, transparent 0.5px);
  background-size: 420px 420px, 320px 320px;
  animation: moveGrid 36s linear infinite;
  mix-blend-mode: screen;
}
@keyframes moveGrid { from{background-position:0 0,0 0} to{background-position:420px 420px,-320px -320px} }

.bg-streaks { position: fixed; inset:0; z-index:1; pointer-events:none; overflow:hidden; opacity:0.06; }
.bg-streaks .streak { position:absolute; width:200%; height:1px; background: linear-gradient(90deg, transparent, rgba(255,76,76,0.9), transparent); top:20%; left:-40%; transform:rotate(-4deg); filter: blur(7px); animation: streakMove 12s linear infinite; }
.bg-streaks .streak.two { top:60%; animation-duration:18s; transform:rotate(-2deg); opacity:0.45; }
@keyframes streakMove { from{left:-100%} to{left:100%} }

.clouds { position: fixed; inset: 6% 0 70% 0; z-index: 2; pointer-events: none; opacity:0.07; filter: blur(8px); }
.rain { pointer-events:none; position: fixed; inset:0; z-index:1; opacity:0.02; }
.rain::before { content:""; position:absolute; inset:0; background-image: repeating-linear-gradient(120deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 2px, transparent 8px); transform: translateY(-20vh); animation: rainFall 6s linear infinite; filter: blur(0.5px) brightness(0.98); }
@keyframes rainFall { to { transform: translateY(20vh); } }

.floating { position: fixed; inset: 20% 0 10% 0; z-index:2; pointer-events:none; overflow:visible; opacity:0.06; }
.leaf { position:absolute; width:24px; height:12px; background: linear-gradient(90deg, rgba(255,120,80,0.9), rgba(255,200,140,0.6)); border-radius:6px; transform-origin:center; filter: blur(0.6px); animation: leafFloat linear infinite; }
.leaf.one { left:8%; top:20%; animation-duration: 12s; } .leaf.two { left:55%; top:35%; animation-duration: 18s; } .leaf.three { left:78%; top:60%; animation-duration: 22s; }
@keyframes leafFloat { 0%{transform:translateY(0) rotate(0deg) scale(.9); opacity:.9} 50%{transform:translateY(24vh) rotate(40deg) scale(1.05); opacity:.6} 100%{transform:translateY(0) rotate(0deg) scale(.9); opacity:.9} }

.bg-noise { position: fixed; inset:0; z-index: 4; pointer-events:none; mix-blend-mode: overlay; opacity:0.03;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><filter id="n"><feTurbulence baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23n)" /></svg>');
}

#starfield { position: fixed; inset:0; z-index:1; pointer-events:none; opacity:0.14; }

/* =========================
   HEADER & NAV
   ========================= */
header {
  position: fixed; top:0; left:0; right:0; height:66px; z-index: 9999;
  display:flex; align-items:center; justify-content:space-between; padding:0 28px;
  background: linear-gradient(180deg, rgba(5,5,6,0.86), rgba(5,5,6,0.35));
  border-bottom: 1px solid rgba(255,255,255,0.03);
  backdrop-filter: blur(6px);
}
.brand { display:flex; align-items:center; gap:12px; z-index:10000; }
.logo { width:44px; height:44px; border-radius:8px; background: linear-gradient(135deg,#ff4c4c,#ff9f1c); display:flex; align-items:center; justify-content:center; font-weight:900; color:#120707; box-shadow: 0 8px 26px rgba(255,76,76,0.12); }
.brand h1 { font-size:18px; letter-spacing:2px; color:#fff; margin-left:4px; }
nav { display:flex; gap:18px; align-items:center; z-index:10000; }
nav a { color:#e9eef1; font-weight:600; padding:8px 10px; border-radius:8px; transition: all .18s ease; font-size:14px; }
nav a:hover, nav a.active { color:#060607; background: linear-gradient(90deg,#ff4c4c,#ff9f1c); transform: translateY(-3px); box-shadow: 0 8px 30px rgba(255,76,76,0.12); }

/* =========================
   HERO
   ========================= */
.hero { position: relative; height:78vh; min-height:520px; display:flex; align-items:center; justify-content:center; text-align:center; padding:0 20px; z-index: 6; overflow:visible; }
.hero .content { max-width:960px; z-index: 7; }
.hero h2 { font-size: clamp(28px, 4vw, 56px); color: #fff; line-height:1.02; letter-spacing:1px; text-shadow: 0 6px 30px rgba(0,0,0,0.8), 0 0 36px rgba(255,76,76,0.06); transform: translateY(10px); opacity: 0; }
.hero p { margin-top:14px; color:#d6d6d6; font-size:18px; transform: translateY(10px); opacity: 0;}
.cta { margin-top:22px; display:flex; gap:12px; justify-content:center; transform: translateY(10px); opacity: 0; }
.btn { padding:10px 18px; border-radius:10px; font-weight:700; cursor:pointer; border:none; transition:all .22s ease; display:inline-flex; align-items:center; gap:10px; }
.btn.primary { background: linear-gradient(90deg,#ff4c4c,#ff9f1c); color:#060607; box-shadow: 0 12px 40px rgba(255,76,76,0.12); }
.btn.ghost { background: rgba(255,255,255,0.02); color:#e9eef1; border: 1px solid rgba(255,255,255,0.04); }

/* =========================
   MAIN / MAP / SECTIONS
   ========================= */
main { position: relative; z-index: 7; padding-bottom: 160px; }
.container { width:92%; max-width:1200px; margin: 30px auto; }
.map-wrap { position: relative; border-radius:16px; overflow:hidden; padding:12px; margin-top:12px; background: linear-gradient(180deg, rgba(255,76,76,0.03), rgba(255,159,28,0.02)); box-shadow: 0 28px 90px rgba(0,0,0,0.6), 0 0 80px rgba(255,76,76,0.06); border: 2px solid rgba(255,76,76,0.08); transition: transform .28s ease, box-shadow .28s ease; }
.map-wrap:hover { transform: translateY(-6px); box-shadow: 0 40px 120px rgba(0,0,0,0.7), 0 0 160px rgba(255,76,76,0.12); }
.map-wrap::before { content:''; position:absolute; inset:-8px; z-index:1; border-radius:20px; background: radial-gradient(closest-side, rgba(255,76,76,0.12), transparent 40%); filter: blur(16px); pointer-events:none; }
.map-iframe { width:100%; height:72vh; min-height:420px; border:0; display:block; position:relative; z-index:3; }
.section { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:22px; margin: 34px auto; box-shadow: 0 12px 40px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.02); }
.secret-list li { margin: 10px 0; font-style: italic; color:#ffd5a8; transition: transform .18s ease, color .18s ease; cursor: default; }
.secret-list li:hover { transform: translateX(6px); color:#ffdfc9; }
.gallery { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); }
.gallery img { width:100%; height:150px; object-fit:cover; border-radius:10px; border:1px solid rgba(255,255,255,0.03); transition: transform .24s ease, box-shadow .24s ease; cursor:pointer; }
.gallery img:hover { transform: scale(1.03); box-shadow: 0 20px 60px rgba(0,0,0,0.6); }

/* contact */
.contact-grid { display:grid; grid-template-columns: 1fr 380px; gap:20px; align-items:start; }
@media (max-width: 940px) { .contact-grid { grid-template-columns: 1fr; } }
.contact-info { padding:18px; border-radius:10px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); border:1px solid rgba(255,255,255,0.02); }
.contact-form input, .contact-form textarea { padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.3); color:#e9eef1; resize:vertical; }
.contact-form label { font-weight:700; color:#ffd7b5; font-size:13px; }
.contact-form button { margin-top:8px; padding:10px 16px; border-radius:8px; border:none; background: linear-gradient(90deg,#ff4c4c,#ff9f1c); color:#060607; font-weight:800; cursor:pointer; }

/* footer */
footer { margin-top:60px; padding:32px 18px; text-align:center; color:#9aa3ad; font-size:14px; border-top:1px solid rgba(255,255,255,0.02); background: linear-gradient(180deg, rgba(0,0,0,0.03), transparent); position: sticky; bottom:0; }

/* scroll top */
.scroll-top { position: fixed; right:20px; bottom:24px; width:52px; height:52px; border-radius:50%; background: linear-gradient(90deg,#ff4c4c,#ff9f1c); color:#060607; font-weight:800; font-size:20px; display:flex; align-items:center; justify-content:center; z-index: 9999; cursor:pointer; box-shadow: 0 12px 40px rgba(255,76,76,0.12); transition: transform .18s ease, opacity .18s ease; opacity:0; pointer-events:none; }
.scroll-top.show { opacity: 1; pointer-events:auto; transform: translateY(-6px); }

/* reveal util */
.revealed { opacity:1 !important; transform: none !important; transition: all .6s cubic-bezier(.2,.9,.3,1); }
.fade-delay-1 { transition-delay: .15s; }
.fade-delay-2 { transition-delay: .35s; }
.fade-delay-3 { transition-delay: .65s; }

/* responsive */
@media (max-width: 900px) {
  nav { display:none; }
  .hamburger { display:flex; }
  .hero { height:60vh; min-height:420px; }
  .map-iframe { height:62vh; }
}
</style>
</head>
<body>

  <!-- PRELOADER (SIMPLE) -->
  <div id="preloader" aria-hidden="false">
    <div class="loader" role="status" aria-live="polite">
      <div class="logo-box" aria-hidden="true"><div style="font-weight:900; font-size:28px; color:#120707;">404</div></div>
      <div class="loader-text">404.lt</div>
      <div class="load-dots" aria-hidden="true"><span></span><span></span><span></span></div>
    </div>
  </div>

  <!-- BACKGROUND LAYERS -->
  <div class="aurora" aria-hidden="true"></div>
  <div class="bg-lines" aria-hidden="true"></div>
  <div class="bg-streaks" aria-hidden="true"><div class="streak"></div><div class="streak two"></div></div>
  <div class="clouds" aria-hidden="true">
    <svg width="100%" height="120" viewBox="0 0 1200 120" preserveAspectRatio="none" style="transform:translateY(0);">
      <path d="M0 60 C 100 20, 200 20, 300 60 C 400 100, 500 100, 600 60 C 700 20, 800 20, 900 60 C 1000 100, 1100 100, 1200 60 L1200 120 L0 120 Z" fill="rgba(255,255,255,0.06)"></path>
    </svg>
  </div>
  <div class="rain" aria-hidden="true"></div>
  <div class="floating" aria-hidden="true"><div class="leaf one"></div><div class="leaf two"></div><div class="leaf three"></div></div>
  <div class="bg-noise" aria-hidden="true"></div>
  <canvas id="starfield" aria-hidden="true"></canvas>

  <!-- HEADER -->
  <header role="banner">
    <div class="brand" aria-hidden="true">
      <div class="logo">404</div>
      <h1>404.lt</h1>
    </div>

    <nav role="navigation" aria-label="Pagrindinis meniu">
      <a href="#hero">Pradžia</a>
      <a href="#map">Žemėlapis</a>
      <a href="#secrets">Slaptos vietos</a>
      <a href="#about">Apie</a>
      <a href="#news">Naujienos</a>
      <a href="#gallery">Galerija</a>
      <a href="#contact">Kontaktai</a>
    </nav>

    <button class="hamburger" id="hamburgerBtn" aria-label="Atidaryti meniu" title="Meniu" style="display:none;">
      <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="2" rx="1" fill="#e9eef1"/><rect y="6" width="18" height="2" rx="1" fill="#e9eef1"/><rect y="12" width="18" height="2" rx="1" fill="#e9eef1"/></svg>
    </button>
  </header>

  <!-- HERO -->
  <section id="hero" class="hero" role="region" aria-label="Pagrindinė">
    <div class="content">
      <h2 id="heroTitle" class="animated">Pamirštos vietos Lietuvoje</h2>
      <p id="heroSub" class="animated fade-delay-1">Atrask slaptas vietas, istorijas ir nuotraukas. Žemėlapis nuolat atnaujinamas.</p>
      <div class="cta animated fade-delay-2">
        <button class="btn primary" onclick="document.getElementById('map').scrollIntoView({behavior:'smooth'})">Žiūrėti žemėlapį</button>
        <a class="btn ghost" href="#secrets">Slaptos vietos</a>
      </div>
    </div>
  </section>

  <!-- MAIN -->
  <main>
    <!-- MAP (no markers) -->
    <div id="map" class="container map-wrap section" role="region" aria-label="Žemėlapis">
      <iframe class="map-iframe"
        src="https://www.google.com/maps/d/u/0/embed?mid=19QHh2E1I7QKqMvTN9FCtXeXCQyja2yU&ehbc=2E312F&noprof=1"
        loading="lazy"
        title="404.lt žemėlapis"></iframe>
    </div>

    <!-- SLAPTOS VIETOS -->
    <div id="secrets" class="container section" role="region" aria-label="Slaptos vietos">
      <h2 class="animated">Slaptos vietos</h2>
      <p style="color:#dcdcdc; margin-top:8px;">Trumpi užuominų aprašymai be tikslių koordinatų — privatumas ir saugumas svarbiau.</p>
      <ul class="secret-list" style="margin-top:12px;">
        <li>Miško paslaptis #1 — trumpa užuomina (be koord.)</li>
        <li>Pamirštas tiltas #2 — tiltas be pavadinimo</li>
        <li>Senovinis bunkeris #3 — prie miško tako</li>
        <li>Paslaptinga pilis #4 — draudžiama teritorija</li>
        <li>Senų laikų kelias #5 — pravažiuok tyliai</li>
      </ul>
    </div>

    <!-- ABOUT -->
    <div id="about" class="container section" role="region" aria-label="Apie projektą">
      <h2 class="animated">Apie projektą</h2>
      <p style="margin-top:12px; color:#d6d6d6;">
        404.lt – bendruomeninis projektas, skirtas rinkti ir saugoti prisiminimus apie pamirštas vietas Lietuvoje.
        Kviečiame siųsti nuotraukas ir trumpus aprašymus — viskas saugoma atsakingai. Projektas netoleruoja žalos gamtai ar privatumo pažeidimų.
      </p>
    </div>

    <!-- NEWS -->
    <div id="news" class="container section" role="region" aria-label="Naujienos">
      <h2 class="animated">Naujienos</h2>
      <ul style="margin-top:12px; color:#d6d6d6;">
        <li><strong>2026-01-11</strong> – Pridėtos naujos slaptos vietos.</li>
        <li><strong>2026-01-10</strong> – Pilnas dizaino atnaujinimas.</li>
        <li><strong>2026-01-09</strong> – Galerija su vietų nuotraukomis.</li>
      </ul>
    </div>

    <!-- GALLERY -->
    <div id="gallery" class="container section" role="region" aria-label="Galerija">
      <h2 class="animated">Galerija</h2>
      <div class="gallery" style="margin-top:12px;">
        <img src="https://via.placeholder.com/1200x800.png?text=Vieta+1" alt="Vieta 1" data-large="https://via.placeholder.com/1600x1200.png?text=Vieta+1+large">
        <img src="https://via.placeholder.com/1200x800.png?text=Vieta+2" alt="Vieta 2" data-large="https://via.placeholder.com/1600x1200.png?text=Vieta+2+large">
        <img src="https://via.placeholder.com/1200x800.png?text=Vieta+3" alt="Vieta 3" data-large="https://via.placeholder.com/1600x1200.png?text=Vieta+3+large">
        <img src="https://via.placeholder.com/1200x800.png?text=Vieta+4" alt="Vieta 4" data-large="https://via.placeholder.com/1600x1200.png?text=Vieta+4+large">
      </div>
    </div>

    <!-- CONTACTS with Formspree integration -->
    <div id="contact" class="container section" role="region" aria-label="Kontaktai">
      <h2 class="animated">Kontaktai</h2>
      <p style="color:#d6d6d6; margin-top:8px;">Įrašyk savo Discord / TikTok / el. paštą čia arba siųsk žinutę per formą — gausime ją tiesiai į Formspree.</p>

      <div class="contact-grid" style="margin-top:16px;">
        <!-- FORM (AJAX via fetch -> Formspree) -->
        <form id="contactForm" class="contact-form" action="#" method="POST" novalidate>
          <label for="c-name">Vardas</label>
          <input id="c-name" name="name" type="text" placeholder="Tavo vardas" required>

          <label for="c-email">El. paštas</label>
          <input id="c-email" name="email" type="email" placeholder="tavo@pastas.lt" required>

          <label for="c-social">Social (Discord / TikTok / Insta)</label>
          <input id="c-social" name="social" type="text" placeholder="pvz. discord: username#1234">

          <label for="c-message">Žinutė</label>
          <textarea id="c-message" name="message" rows="6" placeholder="Žinutė..." required></textarea>

          <div style="display:flex; gap:10px; align-items:center;">
            <button id="formSubmit" type="submit" class="btn primary">Siųsti</button>
            <div id="formStatus" style="color:#d6d6d6; font-size:14px;"></div>
          </div>
          <div style="font-size:12px;color:#bfbfbf;margin-top:8px;">Formspree integracija (AJAX). Jeigu nori fallback be JS, pakeisk form `action` į Formspree URL.</div>
        </form>

        <div class="contact-info">
          <h4 style="color:#ffd7b5;margin-bottom:10px;">Greiti kontaktai</h4>
          <p style="color:#d6d6d6;">Discord: <span id="discordPlaceholder" style="color:#fff;">(pridėsi vėliau)</span></p>
          <p style="color:#d6d6d6;">TikTok: <span id="tiktokPlaceholder" style="color:#fff;">(pridėsi vėliau)</span></p>
          <p style="color:#d6d6d6;">El. paštas: <span id="emailPlaceholder" style="color:#fff;">(pridėsi vėliau)</span></p>

          <div style="margin-top:18px;">
            <h5 style="color:#ffd7b5;margin-bottom:8px;">Dalijimasis</h5>
            <p style="color:#d6d6d6;font-size:14px;">Share: <a href="#" style="color:#ff9f1c;">Facebook</a> · <a href="#" style="color:#ff9f1c;">Twitter</a> · <a href="#" style="color:#ff9f1c;">Reddit</a></p>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- SCROLL TOP -->
  <button class="scroll-top" id="scrollTopBtn" aria-label="Grįžti į viršų">↑</button>

  <!-- FOOTER -->
  <footer role="contentinfo">
    <div style="max-width:1100px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:8px;">
      <div style="display:flex;gap:12px;align-items:center;">
        <div style="width:8px;height:8px;border-radius:50%;background:linear-gradient(90deg,#ff4c4c,#ff9f1c);"></div>
        <div style="font-weight:800;color:#e7eef0;">404.lt</div>
      </div>
      <div style="color:#9aa3ad;font-size:13px;">© 2026 404.lt — Pamirštos vietos. Projektas bendruomeninis. Visi teisės saugomos.</div>
    </div>
  </footer>

  <!-- LIGHTBOX -->
  <div id="lightbox" aria-hidden="true" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.85); z-index:99999;">
    <button id="lbClose" aria-label="Uždaryti" style="position:absolute; top:24px; right:24px; background:transparent; border:none; color:#fff; font-size:28px; cursor:pointer;">✕</button>
    <img id="lbImg" src="" alt="" style="max-width:92%; max-height:86%; border-radius:10px; box-shadow: 0 20px 80px rgba(0,0,0,0.8);">
  </div>

<script>
/* =========================
   FORMSPREE ENDPOINT
   ========================= */
const FORMSPREE_ENDPOINT = 'https://formspree.io/f/mreezwzg';

/* =========================
   PRELOADER: simple hide on load
   ========================= */
window.addEventListener('load', () => {
  const pre = document.getElementById('preloader');
  if(pre){
    pre.classList.add('hidden');
    setTimeout(()=> { if(pre.parentNode) pre.parentNode.removeChild(pre); }, 700);
  }
  // start initial reveals after load
  setTimeout(initReveals, 120);
});

/* small reveal for hero */
function initReveals(){
  document.querySelectorAll('.hero .animated, .animated').forEach((el, i) => {
    setTimeout(()=> { el.style.opacity = 1; el.style.transform = 'translateY(0)'; el.classList.add('revealed'); }, 140 + i*120);
  });
}

/* =========================
   STARFIELD (canvas)
   ========================= */
(function starfield(){
  const canvas = document.getElementById('starfield');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;
  const stars = [];
  const STAR_COUNT = Math.floor((w*h) / 9000);
  for(let i=0;i<STAR_COUNT;i++){
    stars.push({ x: Math.random()*w, y: Math.random()*h, r: Math.random()*1.6 + 0.2, a: Math.random()*0.9 + 0.1, vx: (Math.random()-0.5)*0.03, vy: (Math.random()-0.2)*0.03 });
  }
  function resize(){ w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
  addEventListener('resize', resize);
  function draw(){
    ctx.clearRect(0,0,w,h);
    for(const s of stars){
      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${s.a})`;
      ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
      ctx.fill();
      s.a += (Math.random()-0.5)*0.02;
      if(s.a < 0.05) s.a = 0.05;
      if(s.a > 1) s.a = 1;
      s.x += s.vx; s.y += s.vy;
      if(s.x < 0) s.x = w; if(s.x > w) s.x = 0; if(s.y < 0) s.y = h; if(s.y > h) s.y = 0;
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* =========================
   CLOUDS motion
   ========================= */
(function clouds(){
  const clouds = document.querySelector('.clouds svg');
  if(!clouds) return;
  let t = 0;
  function loop(){
    t += 0.002;
    const x = Math.sin(t) * 8;
    clouds.style.transform = `translateX(${x}px)`;
    requestAnimationFrame(loop);
  }
  loop();
})();

/* =========================
   PARALLAX for flares on scroll
   ========================= */
(function parallax(){
  const flares = document.querySelectorAll('.aurora, .bg-flares .flare');
  window.addEventListener('scroll', () => {
    const y = window.scrollY;
    flares.forEach((f, i) => {
      const speed = 0.02 + (i * 0.01);
      f.style.transform = `translateY(${y * speed}px) scale(${1 - i*0.04})`;
    });
  }, { passive: true });
})();

/* =========================
   Fade-in sections
   ========================= */
(function fadeInSections(){
  const targets = document.querySelectorAll('.section, .gallery img, .secret-list li, .hero .animated, h2.animated');
  const io = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if(entry.isIntersecting){
        entry.target.classList.add('revealed');
        entry.target.style.opacity = 1;
        entry.target.style.transform = 'translateY(0)';
        obs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.12, rootMargin: '0px 0px -40px 0px' });
  targets.forEach(t => { t.style.opacity = 0; t.style.transform = 'translateY(14px)'; io.observe(t); });
})();

/* =========================
   GALLERY LIGHTBOX
   ========================= */
(function lightbox(){
  const images = document.querySelectorAll('.gallery img');
  const lightbox = document.getElementById('lightbox');
  const lbImg = document.getElementById('lbImg');
  const lbClose = document.getElementById('lbClose');
  if(!images.length) return;
  images.forEach(img => {
    img.addEventListener('click', () => {
      const src = img.dataset.large || img.src;
      lbImg.src = src;
      lightbox.style.display = 'flex'; lightbox.setAttribute('aria-hidden','false');
      setTimeout(()=> lightbox.style.opacity = '1', 20);
      document.body.style.overflow = 'hidden';
    });
  });
  function closeLB(){ lightbox.style.opacity='0'; lightbox.setAttribute('aria-hidden','true'); setTimeout(()=> { lightbox.style.display='none'; lbImg.src=''; document.body.style.overflow=''; }, 260); }
  lbClose.addEventListener('click', closeLB);
  lightbox.addEventListener('click', (e)=> { if(e.target===lightbox) closeLB(); });
  document.addEventListener('keydown', (e)=> { if(e.key==='Escape') closeLB(); });
})();

/* =========================
   UI: scroll top, nav
   ========================= */
(function ui(){
  const scrollBtn = document.getElementById('scrollTopBtn');
  const navLinks = document.querySelectorAll('header nav a');
  const hamburger = document.getElementById('hamburgerBtn');
  const nav = document.querySelector('header nav');

  window.addEventListener('scroll', () => {
    if(window.scrollY > 260) scrollBtn.classList.add('show'); else scrollBtn.classList.remove('show');
    let current = '';
    document.querySelectorAll('main > .container, main .section').forEach(sec => {
      const id = sec.id;
      if(!id) return;
      if(window.scrollY >= sec.offsetTop - 90) current = id;
    });
    navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === ('#' + current)));
  });

  scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

  hamburger.addEventListener('click', () => {
    if(nav.style.display === 'flex'){ nav.style.display = ''; } else {
      nav.style.display = 'flex'; nav.style.flexDirection = 'column'; nav.style.position = 'absolute';
      nav.style.top = '66px'; nav.style.right = '14px'; nav.style.background = 'rgba(6,6,7,0.98)';
      nav.style.padding = '12px'; nav.style.borderRadius = '10px'; nav.style.boxShadow = '0 12px 40px rgba(0,0,0,0.6)'; nav.style.zIndex = 99999;
    }
  });

  navLinks.forEach(a => a.addEventListener('click', () => { if(window.innerWidth < 900) nav.style.display = 'none'; }));
})();

/* =========================
   FORM: Formspree AJAX submit
   ========================= */
(function formspreeSetup(){
  const form = document.getElementById('contactForm');
  const statusEl = document.getElementById('formStatus');
  const submitBtn = document.getElementById('formSubmit');
  if(!form) return;

  function showStatus(msg, ok=true){
    statusEl.textContent = msg;
    statusEl.style.color = ok ? '#bfe6c5' : '#f7b2b2';
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = {
      name: form.elements['name'].value,
      email: form.elements['email'].value,
      social: form.elements['social'].value,
      message: form.elements['message'].value,
      page: window.location.href,
      timestamp: new Date().toISOString()
    };

    if(!data.name || !data.email || !data.message){
      showStatus('Užpildyk visus privalomus laukus.', false);
      return;
    }

    submitBtn.disabled = true;
    const origText = submitBtn.innerHTML;
    submitBtn.innerHTML = 'Siunčiama…';
    showStatus('Siunčiama…');

    try{
      const resp = await fetch(FORMSPREE_ENDPOINT, {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      });
      const json = await resp.json();
      if(resp.ok || json.ok || json.success){
        showStatus('Žinutė išsiųsta — ačiū!', true);
        submitBtn.innerHTML = 'Išsiųsta';
        form.reset();
        setTimeout(()=> { submitBtn.disabled = false; submitBtn.innerHTML = origText; showStatus(''); }, 2500);
      } else {
        showStatus('Klaida siunčiant. Patikrink duomenis arba pabandyk vėliau.', false);
        submitBtn.disabled = false;
        submitBtn.innerHTML = origText;
      }
    } catch(err){
      console.error('Formspree error', err);
      showStatus('Tinklapių klaida. Pabandyk vėliau.', false);
      submitBtn.disabled = false;
      submitBtn.innerHTML = origText;
    }
  });
})();

/* =========================
   placeholders helper
   ========================= */
(function fillPlaceholders(){
  // document.getElementById('discordPlaceholder').textContent = 'YourName#1234';
  // document.getElementById('tiktokPlaceholder').textContent = '@yourtik';
  // document.getElementById('emailPlaceholder').textContent = 'you@domain.lt';
})();

/* accessibility: show focus when tabbing */
document.addEventListener('keydown', (e) => { if(e.key === 'Tab') document.body.classList.add('user-is-tabbing'); });
</script>
</body>
</html>
